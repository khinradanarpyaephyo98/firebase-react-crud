{"ast":null,"code":"import _defineProperty from\"/Users/khinradanar/Desktop/krpp_crud/crud-firebase-info-system/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/khinradanar/Desktop/krpp_crud/crud-firebase-info-system/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/khinradanar/Desktop/krpp_crud/crud-firebase-info-system/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{Link,useHistory,useParams}from'react-router-dom';import\"./AddEdit.css\";import fireDb from\"../firebase\";import axios from'axios';import{toast}from\"react-toastify\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialState={name:\"\",email:\"\",contact:\"\"};var AddEdit=function AddEdit(){var _useState=useState(initialState),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var name=state.name,email=state.email,contact=state.contact;var history=useHistory();var _useParams=useParams(),id=_useParams.id;useEffect(function(){fireDb.child(\"contacts\").on(\"value\",function(snapshot){if(snapshot.val()!==null){setData(_objectSpread({},snapshot.val()));}else{setData({});}});return function(){setData({});};},[id]);useEffect(function(){if(id){setState(_objectSpread({},data[id]));}else{setState(_objectSpread({},initialState));}return function(){setState(_objectSpread({},initialState));};},[id,data]);var handleInputChange=function handleInputChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setState(_objectSpread(_objectSpread({},state),{},_defineProperty({},name,value)));};var handleSubmit=function handleSubmit(e){e.preventDefault();if(!name||!email||!contact){toast.error(\"Please insert value into each input field\");}else{if(!id){fireDb.child(\"contacts\").push(state,function(err){if(err){toast.error(\"error\");}else{toast.success(\"Contact Added Successfully \");}});}else{fireDb.child(\"contacts/\".concat(id)).set(state,function(err){if(err){toast.error(err);}else{toast.success(\"Contact Updated Sucessfully \");}});}setTimeout(function(){return history.push(\"/\");},500);}};return/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"100px\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:\" Contact \"}),/*#__PURE__*/_jsxs(\"form\",{style:{margin:\"auto\",padding:\"15px\",maxWidth:\"400px\",alignContact:\"center\"},onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",name:\"name\",placeholder:\" Your Name ...\",value:name||\"\",onChange:handleInputChange}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",name:\"email\",placeholder:\"Your Email ...\",value:email||\"\",onChange:handleInputChange}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"contact\",children:\" Contact\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"contact\",name:\"contact\",placeholder:\"Your contact No ...\",value:contact||\"\",onChange:handleInputChange}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:id?\"Update\":\"Save\"})]})]});};export default AddEdit;","map":{"version":3,"sources":["/Users/khinradanar/Desktop/krpp_crud/crud-firebase-info-system/src/pages/AddEdit.js"],"names":["React","useEffect","useState","Link","useHistory","useParams","fireDb","axios","toast","initialState","name","email","contact","AddEdit","state","setState","data","setData","history","id","child","on","snapshot","val","handleInputChange","e","target","value","handleSubmit","preventDefault","error","push","err","success","set","setTimeout","marginTop","margin","padding","maxWidth","alignContact"],"mappings":"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","sourcesContent":["import React, {  useEffect, useState } from \"react\";\nimport {Link,useHistory,useParams} from 'react-router-dom';\nimport \"./AddEdit.css\"\nimport fireDb from \"../firebase\";\nimport axios from 'axios';\nimport {toast} from \"react-toastify\";\n\n\nconst initialState = {\n    name: \"\",\n    email: \"\" ,\n    contact: \"\",\n}\n\n\nconst AddEdit= () => {\n    const [state,setState] = useState(initialState);\n    const [data,setData] = useState({});\n\n    const { name, email, contact} = state;\n\n    const history=useHistory();\n\n    const {id} = useParams();\n\n    useEffect(() => {\n        fireDb.child(\"contacts\").on(\"value\",(snapshot) => {\n            if(snapshot.val()!==null){\n                setData({...snapshot.val()});\n            }else{\n                setData({});\n            }\n        });\n        return () => {\n            setData({});\n        };\n    },[id]);\n\n    useEffect(() => {\n        if(id) {\n            setState({...data[id]})\n        } else{\n            setState({...initialState})\n        }\n        return () => {\n            setState({...initialState})\n        };\n    },[id,data]);\n\n    const handleInputChange= (e) => {\n        const {name,value} = e.target;\n        setState({...state,[name] : value });\n    };\n\n    const handleSubmit= (e) => {\n        e.preventDefault();\n        if(!name || !email || !contact) {\n            toast.error (\"Please insert value into each input field\");\n         }\n         else {\n             if(!id){\n                fireDb.child(\"contacts\").push( state, (err) => {\n                if(err){\n                    toast.error(\"error\");\n                } else{\n                    toast.success(\"Contact Added Successfully \");\n                }\n                });    \n             }else{\n                 fireDb.child(`contacts/${id}`).set(state, (err) => {\n                     if(err) {\n                         toast.error(err);\n                     }else {\n                         toast.success(\"Contact Updated Sucessfully \");\n                     }\n                 });\n             }\n            setTimeout(() => history.push(\"/\"), 500);\n            }\n    }; \n\n    return (\n        <div style={{marginTop: \"100px\" }}>\n            <h2> Contact </h2>\n            <form \n             style={{\n                margin: \"auto\", \n                padding: \"15px\",\n                maxWidth: \"400px\",\n                alignContact: \"center\",\n                }}\n                onSubmit={handleSubmit}\n            >\n                <label htmlFor=\"name\">Name</label>\n                <input \n                type=\"text\"\n                id=\"name\"\n                name=\"name\"\n                placeholder=\" Your Name ...\"\n                value={name || \"\"}\n                onChange={handleInputChange}\n                />\n\n                <label htmlFor=\"email\">Email</label>\n                <input \n                type=\"email\"\n                id=\"email\"\n                name=\"email\"\n                placeholder=\"Your Email ...\"\n                value={email || \"\"}\n                onChange={handleInputChange}\n                />\n\n                <label htmlFor=\"contact\" > Contact</label>\n                <input \n                type=\"number\"\n                id=\"contact\"\n                name=\"contact\"\n                placeholder=\"Your contact No ...\"\n                value={contact || \"\"}\n                onChange={handleInputChange}\n                />\n                <input type=\"submit\" value={id? \"Update\" : \"Save\" } />\n            </form>\n        </div>\n    );\n}\n\nexport default AddEdit;"]},"metadata":{},"sourceType":"module"}